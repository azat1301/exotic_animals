<div data-controller="calculation" class="container-md mt-5">
  <div class="row">
    <div class="col-12 col-md-8">
      <div class="card-trip">
        <img src='<%= @animal.photo.attached? ? cl_image_path(@animal.photo.key) : "https://mycountrysidevet.com/wp-content/uploads/2018/08/shutterstock_1043006710.jpg" %>' />
        <div class="card-trip-infos">
          <div>
            <h1><strong><%= @animal.name %></strong></h1>
            <h2>Species: <%= @animal.species %></h2>
            <p>Sex: <%= @animal.sex %></p>
            <p>Age: <%= @animal.age %> years</p>
            <p><%= @animal.rarity_level %> Species</p>
            <p><%= @animal.species.pluralize %> are <strong><%= @animal.diet %>s</strong></p>
            <p>Location: <strong><%= @animal.location %></strong></p>
          </div>
          <h2 class="card-trip-pricing">$<%= @animal.price %></h2>
          <img src="https://kitt.lewagon.com/placeholder/users/yannklein" class="card-trip-user avatar-bordered" />
        </div>
      </div>
    </div>
    <div class="col-12 col-md-4 mt-4 mb-4">
      <h3><strong>When would you like to book <%= @animal.name %> for?</strong></h3>
      <%= simple_form_for [@animal, @booking] do |f| %>
        <%= f.input :start_date, html5: true, input_html: {data: {calculation_target:"startDay", action: "change->calculation#calculate"} } %>
        <%= f.input :end_date, html5: true, input_html: {data: {calculation_target:"endDay", action: "change->calculation#calculate"} }  %>
        <%= f.submit %>
      <% end %>
      <h3>$ <span data-calculation-target="price"> <%= @animal.price %> </span> x <span data-calculation-target="days">1</span> </h3>
      <p>Total $ <span data-calculation-target="total"> <%= @animal.price %></span></p>
    </div>
  </div>
  <h2 class="mt-5">Where the <%= @animal.name %> is located</h2>
  <div class="cards" style="width: 100%; height: 600px;"
      data-controller="mapbox"
      data-mapbox-markers-value="<%= @markers.to_json %>"
      data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
</div>
